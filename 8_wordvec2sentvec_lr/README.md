# Introduction
This set of experiment is used to generate sentence vector by combining word vectors.

# About folders & files:

1. `data`
	- `chat`: contains the original data of chatbot
	- `utterances`: contains the original data of task & nontask utterances and categories
2. `code`
	- `gen_sentvec.py`: will load word and word vector, as well as the sentences, then generate the sentence vector(mathematical mean of all the word vectors in the sentence or statistics of all word vectors' pairwise inner product), then save the generated sentence vectors into output files.
	- `lr.py`: will load the sentence vector file generated by `gen_sentvec.py`, as well as the sentences' label(AKA categories, such as 'QA', 'Art', etc.), then construct features and run sk-learn logistic regression.
	- `skip-thoughts.py`: the skip-thoughts code to combine word embeddings into sentence embeddings.
3. `output`
	- Contains output data generated by `gen_sentvec.py`
	- The subfolder `skip-thoughts` contains:
		- `ch2v_word_list`: the word dictionary list
		- `ch2v_table.npy`: the word embedding numpy array; each line is the word embedding for each line in `ch2v_word_list` correspondingly.
		- `model.npz`: the model trained in experiments `4_skipthoughts_train`.
		- `model.npz.pkl`: the pickle file contains the model parameters.

# Running instructions
1. Under `/code` folder, open `parameters.txt` and modify the file paths. Parameter name and value are separated by "="
    - `gen_method`: Options: `mean` or `inner_prd`. This parameter specifies the method to combine the word vectors into sentence vector. `mean` is to generate the sentence vector as the arithmetic mean of all the word vectors in the sentence; `inner_prd` is to generate the sentence vector as a list of all word vector pairs' inner products' **max, min, mean, variance**
    - `corpus_word_path`: File path to a dictionary for the word corpus. Each line is a distinct word. Used for sentence vector generation.
    - `corpus_word_vector_path`: File path to a list of word vectors. This file is generated by character2vector model. Each line is the vector for the word in the `corpus_word_path` file at the same line number. Used for sentence vector generation.
    - `task_cat_path`: File path to the categories for task-oriented utterances. Each line is the category(label) for the utterance in the 0th and 1st file path in task_utt_path_list at the same line number. Used for Logistic Regression.
    - `nontask_cat_path`: File path to the categories for nontask-oriented utterances. Each line is the category(label) for the utterance in the 2nd and 3rd file path in task_utt_path_list at the same line number. Used for Logistic Regression.
    - `utt_path_list`: A list of utterances file paths, separated by space. Do care about the file paths' order, the order should be as below: **task-correct-fpath task-error-fpath nontask-correct-fpath nontask-error-fpath chatbot-fpath** Used for both sentence vector generation and Logistic Regression.
    - `output_fpath_list`: A list of output file paths, each corresponding to one utterance file path in `utt_path_list`, separated by space. Do care about the file paths' order, the order should be as below: **task-correct-output-fpath task-error-output-fpath nontask-correct-output-fpath nontask-error-output-fpath chatbot-output-fpath** Used for both sentence vector generation and Logistic Regression.

2. Under `/cold` folder, run `python main.py [parameter-filepath]`. Sentence vector file will be generated under the `output_fpath_list` paths that you specified in the parameter file; command line will give the prediction accuracy by Logistic Regression.